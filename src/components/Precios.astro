---
/* Sin props: contenido fijo según el fragmento */
---

<section id="PRECIOS" class="scroll-mt-16 py-16 sm:py-20 bg-[var(--bp-bg)]">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <!-- Encabezado -->
    <header class="text-center max-w-3xl mx-auto">
      <h2 class="text-4xl font-bold tracking-wide text-[var(--bp-ink-muted)]">
        Precios
      </h2>
      <p class="mt-2 text-xl md:text-2xl font-bold text-[var(--bp-ink)]">
        Precios competitivos, servicio premium.
      </p>
    </header>

    <!-- Tablas -->
    <div class="mt-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-4">
      <!-- 7 días -->
      <article
        class="reveal-card relative flex flex-col rounded-2xl border border-[var(--bp-border)] bg-[var(--bp-surface)] p-8 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md min-h-[20.4rem] md:min-h-[22.1rem]"
        style="--d:0ms"
      >
        <h3 class="text-lg font-bold text-[1.5rem] flex items-center">
          <span>7 días</span>
          <span class="ml-1 inline-flex flex-col items-center leading-none pt-1">
            <sup class="text-[1rem] font-bold">-</sup>
            <sub class="text-[1rem] font-bold">+</sub>
          </span>
        </h3>

        <div class="mt-6 leading-none">
          <div class="flex items-baseline gap-2">
            <span class="text-4xl md:text-5xl font-extrabold text-[var(--bp-ink)]">$</span>
            <span class="text-4xl md:text-6xl font-extrabold tracking-tight text-[var(--bp-primary)]">14800</span>
          </div>
          <div class="mt-1 text-sm md:text-2xl text-[var(--bp-ink-muted)] text-center">x día</div>
        </div>

        <div class="flex justify-center items-center">
          <a
            href="#"
            data-reserva-open
            class="mt-6 text-center rounded-md bg-[--bp-support] px-6 py-3 text-white font-semibold btn-accent"
            data-cta-observer
          >Calcular Tarifa</a>
        </div>

        <div class="discount-banner mt-auto">
          10% OFF en el total de tu reserva
        </div>
      </article>

      <!-- 14 días -->
      <article
        class="reveal-card relative flex flex-col rounded-2xl border border-[var(--bp-border)] bg-[var(--bp-surface)] p-8 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md min-h-[20.4rem] md:min-h-[22.1rem]"
        style="--d:160ms"
      >
        <h3 class="text-lg font-bold text-[1.5rem] flex items-center">
          <span>14 días</span>
          <span class="ml-1 inline-flex flex-col items-center leading-none pt-1">
            <sup class="text-[1rem] font-bold">-</sup>
            <sub class="text-[1rem] font-bold">+</sub>
          </span>
        </h3>

        <div class="mt-6 leading-none">
          <div class="flex items-baseline gap-2">
            <span class="text-4xl md:text-5xl font-extrabold text-[var(--bp-ink)]">$</span>
            <span class="text-4xl md:text-6xl font-extrabold tracking-tight text-[var(--bp-primary)]">12500</span>
          </div>
          <div class="mt-1 text-sm md:text-2xl text-[var(--bp-ink-muted)] text-center">x día</div>
        </div>

        <div class="flex justify-center items-center">
          <a
            href="#"
            data-reserva-open
            class="mt-6 text-center rounded-md bg-[--bp-support] px-6 py-3 text-white font-semibold btn-accent"
            data-cta-observer
          >Calcular Tarifa</a>
        </div>

        <div class="discount-banner mt-auto">
          10% OFF en el total de tu reserva
        </div>
      </article>

      <!-- 21 días -->
      <article
        class="reveal-card relative flex flex-col rounded-2xl border border-[var(--bp-border)] bg-[var(--bp-surface)] p-8 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md min-h-[20.4rem] md:min-h-[22.1rem]"
        style="--d:320ms"
      >
        <h3 class="text-lg font-bold text-[1.5rem] flex items-center">
          <span>21 días</span>
          <span class="ml-1 inline-flex flex-col items-center leading-none pt-1">
            <sup class="text-[1rem] font-bold">-</sup>
            <sub class="text-[1rem] font-bold">+</sub>
          </span>
        </h3>

        <div class="mt-6 leading-none">
          <div class="flex items-baseline gap-2">
            <span class="text-4xl md:text-5xl font-extrabold text-[var(--bp-ink)]">$</span>
            <span class="text-4xl md:text-6xl font-extrabold tracking-tight text-[var(--bp-primary)]">11000</span>
          </div>
          <div class="mt-1 text-sm md:text-2xl text-[var(--bp-ink-muted)] text-center">x día</div>
        </div>

        <div class="flex justify-center items-center">
          <a
            href="#"
            data-reserva-open
            class="mt-6 text-center rounded-md bg-[--bp-support] px-6 py-3 text-white font-semibold btn-accent"
            data-cta-observer
          >Calcular Tarifa</a>
        </div>

        <div class="discount-banner mt-auto">
          10% OFF en el total de tu reserva
        </div>
      </article>

      <!-- 30 días -->
      <article
        class="reveal-card relative flex flex-col rounded-2xl border border-[var(--bp-border)] bg-[var(--bp-surface)] p-8 shadow-sm transition hover:-translate-y-0.5 hover:shadow-md min-h-[20.4rem] md:min-h-[22.1rem]"
        style="--d:480ms"
      >
        <h3 class="text-lg font-bold text-[1.5rem] flex items-center">
          <span>30 días</span>
          <span class="ml-1 inline-flex flex-col items-center leading-none pt-1">
            <sup class="text-[1rem] font-bold">-</sup>
            <sub class="text-[1rem] font-bold">+</sub>
          </span>
        </h3>

        <div class="mt-6 leading-none">
          <div class="flex items-baseline gap-2">
            <span class="text-4xl md:text-5xl font-extrabold text-[var(--bp-ink)]">$</span>
            <span class="text-4xl md:text-6xl font-extrabold tracking-tight text-[var(--bp-primary)]">10000</span>
          </div>
          <div class="mt-1 text-sm md:text-2xl text-[var(--bp-ink-muted)] text-center">x día</div>
        </div>

        <div class="flex justify-center items-center">
          <a
            href="#"
            data-reserva-open
            class="mt-6 text-center rounded-md bg-[--bp-support] px-6 py-3 text-white font-semibold btn-accent"
            data-cta-observer
          >Calcular Tarifa</a>
        </div>

        <div class="discount-banner mt-auto">
          10% OFF en el total de tu reserva
        </div>
      </article>
    </div>
  </div>

  <style>
    /* Banner unificado al pie de la tarjeta */
    .discount-banner{
      display:grid; place-items:center; text-align:center;
      background:var(--bp-accent); color:#111;
      font-weight:700; font-size:.82rem; letter-spacing:.2px;
      border-radius:12px; padding:.55rem .9rem; margin-top:1rem;
      box-shadow:0 2px 8px rgba(0,0,0,.08);
    }

    /* Animación de aparición */
    .reveal-card{
      opacity:0;
      transform:translateY(24px) scale(.98);
      filter:blur(2px);
      transition:opacity .9s ease, transform .9s ease, filter .9s ease;
      transition-delay:var(--d,0ms);
      will-change:opacity, transform, filter;
    }
    .reveal-card.is-in{
      opacity:1; transform:translateY(0) scale(1); filter:blur(0);
    }
  </style>

  <!-- Fallback sin JS -->
  <noscript>
    <style>
      .reveal-card{ opacity:1 !important; transform:none !important; filter:none !important; }
    </style>
  </noscript>

  <script is:inline>
    (function(){
      const section = document.getElementById("PRECIOS");
      if(!section) return;

      const cards = Array.from(section.querySelectorAll(".reveal-card"));
      if(!cards.length) return;

      // Si no hay IO, mostramos todo
      if(!("IntersectionObserver" in window)){
        cards.forEach(c => c.classList.add("is-in"));
        return;
      }

      const isMobile = matchMedia("(max-width: 640px)").matches;

      const io = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          if(entry.isIntersecting){
            entry.target.classList.add("is-in");
            io.unobserve(entry.target); // dispara una vez por card
          }
        });
      }, {
        root: null,
        threshold: isMobile ? 0.12 : 0.25,     // más permisivo en mobile
        rootMargin: isMobile ? "0px 0px -10%" : "0px 0px -20%"
      });

      cards.forEach((c, i) => {
        // si alguna card no trae delay, lo escalonamos acá
        if(!c.style.getPropertyValue("--d")){
          c.style.setProperty("--d", `${i * 140}ms`);
        }
        io.observe(c);
      });
    })();
  </script>
</section>
