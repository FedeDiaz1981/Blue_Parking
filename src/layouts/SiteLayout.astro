---
import "../styles/global.css";
import Header from "../components/Header.astro";
import logo from "../../public/logo.png";
import logoST from "../../public/logo_ST.png"
import whatsapp from "../../public/whatsapp.png";
import StickyBookBar from "../components/StickyBookBar.astro";
import StickyCTA from "../components/src/components/StickyCTA.astro";
import Footer from "../components/Footer.astro";
import ReservaModal from "../components/ReservaModal.astro";

const {
  title = "Blue_Parking",
  description = "Estacionamiento seguro y práctico.",
  ogImage = "/og.jpg",
  noIndex = false,
} = Astro.props;
---

<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    <meta name="description" content={description} />
    {noIndex && <meta name="robots" content="noindex,nofollow" />}
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:type" content="website" />
    <link rel="icon" href="/favicon.ico" />
  </head>
  <body class="min-h-screen bg-white text-gray-900 antialiased w-100">
    <Header
      logoHref={"#INICIO"}
      logoSrc={logo.src}
      logoAlt={"Blue_Parking"}
      links={[
        { href: "#SERVICIO", label: "Servicio" },
        { href: "#COMO-FUNCIONA", label: "Cómo funciona" },
        { href: "#PREGUNTAS-FRECUENTES", label: "Preguntas frecuentes" },
        { href: "#BENEFICIOS", label: "Beneficios" },
        { href: "#PRECIOS", label: "Precios" },
        { href: "#NOSOTROS", label: "Nosotros" },
        { href: "#CONTACTO", label: "Contacto" },
      ]}
      cta={{ href: "#", label: "Reserva" }}
    />
    <StickyBookBar />
    {/* full-bleed pegado bajo el header (header = h-16 = 64px) */}
    <div class="-mt-16 relative z-0">
      <slot name="full" />
    </div>

    {/* contenido normal */}
    <slot />
    <a
      href="https://wa.me/541150252973?text=Hola!%20Quiero%20reservar"
      class="fixed right-6 bottom-4 z-40 rounded-full p-1 group
             transition-colors duration-200 ease-in-out
             hover:bg-white"
      aria-label="WhatsApp"
    >
      <img
        src={whatsapp.src}
        alt="whatsapp"
        class="h-[3.6rem] w-[3.6rem]
               transition-transform duration-200 ease-in-out
               group-hover:scale-110"
      />
    </a>
    <StickyCTA
      href="#"
      data-reserva-open
    />
    <Footer
      brand="Blue_Parking"
      email="Infoblueparking@gmail.com"
      whatsappHref="https://wa.me/5491150252973?text=Hola%2C%20quiero%20reservar"
      whatsappHref_2="https://wa.me/5491133586597?text=Hola%2C%20quiero%20reservar"
      logoSrc={logoST.src}
      privacyHref="/privacidad"
    />
    <ReservaModal whatsapp="5491150252973" minDias={3} />
    
    <script is:inline>
      const io = new IntersectionObserver(
        (es) =>
          es.forEach((e) =>
            e.target.classList.toggle("is-in", e.isIntersecting)
          ),
        { threshold: 0.2 }
      );
      document.querySelectorAll(".reveal").forEach((el) => io.observe(el));
    </script>
  </body>
</html>
